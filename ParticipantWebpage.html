<!doctype html>
<html lang="es" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Portal Participantes - Intercambio de Regalos</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <script src="/_sdk/data_sdk.js"></script>
  <style>
        body {
            box-sizing: border-box;
            position: relative;
        }
        
        body::before {
            content: '';
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            height: 40%;
            background: linear-gradient(to top, rgba(30, 58, 138, 0.15) 0%, transparent 100%);
            z-index: 0;
            pointer-events: none;
        }
        
        .christmas-city {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            height: 35%;
            z-index: 1;
            pointer-events: none;
            display: flex;
            justify-content: space-around;
            align-items: flex-end;
            padding: 0 5%;
            opacity: 0.3;
        }
        
        .building {
            display: flex;
            flex-direction: column;
            align-items: center;
            filter: drop-shadow(0 4px 6px rgba(0,0,0,0.1));
        }
        
        .building-body {
            background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%);
            border-radius: 8px 8px 0 0;
            position: relative;
        }
        
        .building-windows {
            position: absolute;
            top: 10%;
            left: 0;
            right: 0;
            height: 80%;
            display: flex;
            flex-direction: column;
            justify-content: space-around;
            padding: 5px;
        }
        
        .window-row {
            display: flex;
            justify-content: space-around;
        }
        
        .window {
            width: 8px;
            height: 8px;
            background: #fbbf24;
            border-radius: 1px;
            box-shadow: 0 0 5px #fbbf24;
        }
        
        .forest {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            height: 25%;
            z-index: 2;
            pointer-events: none;
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
            opacity: 0.4;
            padding: 0 2%;
        }
        
        .tree {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 0 -10px;
        }
        
        .tree-top {
            width: 0;
            height: 0;
            border-left: 20px solid transparent;
            border-right: 20px solid transparent;
            border-bottom: 35px solid #065f46;
            position: relative;
        }
        
        .tree-top::after {
            content: '';
            position: absolute;
            top: -8px;
            left: -20px;
            width: 40px;
            height: 12px;
            background: white;
            border-radius: 50%;
            opacity: 0.9;
        }
        
        .tree-middle {
            width: 0;
            height: 0;
            border-left: 25px solid transparent;
            border-right: 25px solid transparent;
            border-bottom: 40px solid #047857;
            margin-top: -15px;
            position: relative;
        }
        
        .tree-middle::after {
            content: '';
            position: absolute;
            top: -5px;
            left: -25px;
            width: 50px;
            height: 10px;
            background: white;
            border-radius: 50%;
            opacity: 0.8;
        }
        
        .tree-bottom {
            width: 0;
            height: 0;
            border-left: 30px solid transparent;
            border-right: 30px solid transparent;
            border-bottom: 45px solid #059669;
            margin-top: -15px;
            position: relative;
        }
        
        .tree-bottom::after {
            content: '';
            position: absolute;
            top: 0px;
            left: -30px;
            width: 60px;
            height: 8px;
            background: white;
            border-radius: 50%;
            opacity: 0.7;
        }
        
        .tree-trunk {
            width: 10px;
            height: 15px;
            background: #78350f;
            margin-top: -5px;
        }
        
        .tree.small .tree-top {
            border-left-width: 12px;
            border-right-width: 12px;
            border-bottom-width: 20px;
        }
        
        .tree.small .tree-top::after {
            width: 24px;
            left: -12px;
            height: 8px;
        }
        
        .tree.small .tree-middle {
            border-left-width: 15px;
            border-right-width: 15px;
            border-bottom-width: 25px;
        }
        
        .tree.small .tree-middle::after {
            width: 30px;
            left: -15px;
            height: 6px;
        }
        
        .tree.small .tree-bottom {
            border-left-width: 18px;
            border-right-width: 18px;
            border-bottom-width: 30px;
        }
        
        .tree.small .tree-bottom::after {
            width: 36px;
            left: -18px;
            height: 5px;
        }
        
        .tree.small .tree-trunk {
            width: 6px;
            height: 10px;
        }
        
        .tree.large .tree-top {
            border-left-width: 28px;
            border-right-width: 28px;
            border-bottom-width: 50px;
        }
        
        .tree.large .tree-top::after {
            width: 56px;
            left: -28px;
            height: 15px;
        }
        
        .tree.large .tree-middle {
            border-left-width: 35px;
            border-right-width: 35px;
            border-bottom-width: 60px;
        }
        
        .tree.large .tree-middle::after {
            width: 70px;
            left: -35px;
            height: 12px;
        }
        
        .tree.large .tree-bottom {
            border-left-width: 42px;
            border-right-width: 42px;
            border-bottom-width: 70px;
        }
        
        .tree.large .tree-bottom::after {
            width: 84px;
            left: -42px;
            height: 10px;
        }
        
        .tree.large .tree-trunk {
            width: 14px;
            height: 20px;
        }
        
        .garland-container {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 150px;
            z-index: 3;
            pointer-events: none;
            overflow: visible;
        }
        
        .garland-strand {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 100%;
        }
        
        .garland-branch {
            position: absolute;
            width: 8px;
            background: linear-gradient(180deg, #065f46 0%, #047857 50%, #059669 100%);
            border-radius: 4px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        
        .garland-branch::before,
        .garland-branch::after {
            content: '';
            position: absolute;
            width: 12px;
            height: 3px;
            background: #065f46;
            border-radius: 2px;
        }
        
        .garland-branch::before {
            top: 20%;
            left: -6px;
            transform: rotate(-30deg);
        }
        
        .garland-branch::after {
            top: 50%;
            right: -6px;
            transform: rotate(30deg);
        }
        
        .light {
            position: absolute;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            animation: twinkle 2s infinite;
        }
        
        .light::before {
            content: '';
            position: absolute;
            top: -3px;
            left: 50%;
            transform: translateX(-50%);
            width: 2px;
            height: 8px;
            background: #1f2937;
            border-radius: 1px;
        }
        
        .light.red {
            background: radial-gradient(circle, #fca5a5 0%, #ef4444 100%);
            box-shadow: 0 0 15px #ef4444, 0 0 5px #ef4444;
        }
        
        .light.yellow {
            background: radial-gradient(circle, #fde68a 0%, #fbbf24 100%);
            box-shadow: 0 0 15px #fbbf24, 0 0 5px #fbbf24;
            animation-delay: 0.5s;
        }
        
        .light.blue {
            background: radial-gradient(circle, #93c5fd 0%, #3b82f6 100%);
            box-shadow: 0 0 15px #3b82f6, 0 0 5px #3b82f6;
            animation-delay: 1s;
        }
        
        .light.green {
            background: radial-gradient(circle, #6ee7b7 0%, #10b981 100%);
            box-shadow: 0 0 15px #10b981, 0 0 5px #10b981;
            animation-delay: 1.5s;
        }
        
        .light.pink {
            background: radial-gradient(circle, #fbcfe8 0%, #ec4899 100%);
            box-shadow: 0 0 15px #ec4899, 0 0 5px #ec4899;
            animation-delay: 0.75s;
        }
        
        .light.orange {
            background: radial-gradient(circle, #fed7aa 0%, #f97316 100%);
            box-shadow: 0 0 15px #f97316, 0 0 5px #f97316;
            animation-delay: 1.25s;
        }
        
        @keyframes twinkle {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.4; transform: scale(0.8); }
        }
        
        .gift-animation {
            animation: giftBounce 2s infinite;
        }
        
        @keyframes giftBounce {
            0%, 100% {
                transform: translateY(0) rotate(0deg);
            }
            25% {
                transform: translateY(-10px) rotate(-5deg);
            }
            75% {
                transform: translateY(-5px) rotate(5deg);
            }
        }
        
        .fade-in {
            animation: fadeIn 0.8s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .confetti-animation {
            animation: confetti 3s ease-out infinite;
        }
        
        @keyframes confetti {
            0% { transform: translateY(0) rotate(0deg); opacity: 1; }
            100% { transform: translateY(100px) rotate(360deg); opacity: 0; }
        }
        
        .snowflake {
            position: fixed;
            top: -10px;
            z-index: 9999;
            user-select: none;
            cursor: default;
            animation: snowfall linear infinite;
            color: white;
            text-shadow: 0 0 5px rgba(255,255,255,0.8);
            pointer-events: none;
        }
        
        @keyframes snowfall {
            0% {
                transform: translateY(0) rotate(0deg);
                opacity: 0.8;
            }
            100% {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0.3;
            }
        }
        
        .snowflake:nth-child(1) { left: 10%; animation-duration: 8s; animation-delay: 0s; font-size: 1.2em; }
        .snowflake:nth-child(2) { left: 20%; animation-duration: 10s; animation-delay: 1s; font-size: 0.8em; }
        .snowflake:nth-child(3) { left: 30%; animation-duration: 12s; animation-delay: 2s; font-size: 1em; }
        .snowflake:nth-child(4) { left: 40%; animation-duration: 9s; animation-delay: 0.5s; font-size: 1.3em; }
        .snowflake:nth-child(5) { left: 50%; animation-duration: 11s; animation-delay: 1.5s; font-size: 0.9em; }
        .snowflake:nth-child(6) { left: 60%; animation-duration: 10s; animation-delay: 2.5s; font-size: 1.1em; }
        .snowflake:nth-child(7) { left: 70%; animation-duration: 13s; animation-delay: 0.8s; font-size: 0.85em; }
        .snowflake:nth-child(8) { left: 80%; animation-duration: 9s; animation-delay: 1.8s; font-size: 1.2em; }
        .snowflake:nth-child(9) { left: 90%; animation-duration: 11s; animation-delay: 2.2s; font-size: 0.95em; }
        .snowflake:nth-child(10) { left: 15%; animation-duration: 12s; animation-delay: 0.3s; font-size: 1em; }
        .snowflake:nth-child(11) { left: 25%; animation-duration: 10s; animation-delay: 1.2s; font-size: 0.9em; }
        .snowflake:nth-child(12) { left: 35%; animation-duration: 11s; animation-delay: 2.8s; font-size: 1.15em; }
        .snowflake:nth-child(13) { left: 45%; animation-duration: 9s; animation-delay: 0.6s; font-size: 0.85em; }
        .snowflake:nth-child(14) { left: 55%; animation-duration: 13s; animation-delay: 1.9s; font-size: 1.1em; }
        .snowflake:nth-child(15) { left: 65%; animation-duration: 10s; animation-delay: 2.3s; font-size: 0.95em; }
        .snowflake:nth-child(16) { left: 75%; animation-duration: 12s; animation-delay: 0.9s; font-size: 1.25em; }
        .snowflake:nth-child(17) { left: 85%; animation-duration: 11s; animation-delay: 1.6s; font-size: 0.88em; }
        .snowflake:nth-child(18) { left: 95%; animation-duration: 9s; animation-delay: 2.7s; font-size: 1.05em; }
        .snowflake:nth-child(19) { left: 5%; animation-duration: 10s; animation-delay: 0.4s; font-size: 0.92em; }
        .snowflake:nth-child(20) { left: 33%; animation-duration: 13s; animation-delay: 1.4s; font-size: 1.18em; }
        
        .shake-animation {
            animation: shake 0.5s ease-in-out;
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }
        
        .pulse-glow {
            animation: pulseGlow 2s infinite;
        }
        
        @keyframes pulseGlow {
            0%, 100% {
                box-shadow: 0 0 20px rgba(239, 68, 68, 0.5);
            }
            50% {
                box-shadow: 0 0 40px rgba(239, 68, 68, 0.8);
            }
        }
        
        .reveal-card {
            background: linear-gradient(135deg, #ec4899 0%, #ef4444 100%);
            box-shadow: 0 25px 50px rgba(0,0,0,0.2);
        }
        
        .login-card {
            background: linear-gradient(135deg, #60a5fa 0%, #3b82f6 100%);
            box-shadow: 0 25px 50px rgba(96, 165, 250, 0.5);
        }
    </style>
  <style>@view-transition { navigation: auto; }</style>
 </head>
 <body class="h-full bg-gradient-to-br from-blue-100 via-indigo-100 to-purple-100 font-sans relative"><!-- Christmas Garland with Sinusoidal Lights -->
  <div class="garland-container">
   <div class="garland-strand" id="garland-strand"></div>
  </div><!-- Christmas City Background -->
  <div class="christmas-city">
   <div class="building">
    <div class="text-3xl">
     ‚≠ê
    </div>
    <div class="building-body" style="width: 60px; height: 120px;">
     <div class="building-windows">
      <div class="window-row">
       <div class="window"></div>
       <div class="window"></div>
       <div class="window"></div>
      </div>
      <div class="window-row">
       <div class="window"></div>
       <div class="window"></div>
       <div class="window"></div>
      </div>
      <div class="window-row">
       <div class="window"></div>
       <div class="window"></div>
       <div class="window"></div>
      </div>
     </div>
    </div>
   </div>
   <div class="building">
    <div class="text-2xl">
     üéÑ
    </div>
    <div class="building-body" style="width: 50px; height: 90px;">
     <div class="building-windows">
      <div class="window-row">
       <div class="window"></div>
       <div class="window"></div>
      </div>
      <div class="window-row">
       <div class="window"></div>
       <div class="window"></div>
      </div>
      <div class="window-row">
       <div class="window"></div>
       <div class="window"></div>
      </div>
     </div>
    </div>
   </div>
   <div class="building">
    <div class="text-3xl">
     ‚ú®
    </div>
    <div class="building-body" style="width: 70px; height: 140px;">
     <div class="building-windows">
      <div class="window-row">
       <div class="window"></div>
       <div class="window"></div>
       <div class="window"></div>
       <div class="window"></div>
      </div>
      <div class="window-row">
       <div class="window"></div>
       <div class="window"></div>
       <div class="window"></div>
       <div class="window"></div>
      </div>
      <div class="window-row">
       <div class="window"></div>
       <div class="window"></div>
       <div class="window"></div>
       <div class="window"></div>
      </div>
     </div>
    </div>
   </div>
   <div class="building">
    <div class="text-2xl">
     üåü
    </div>
    <div class="building-body" style="width: 55px; height: 100px;">
     <div class="building-windows">
      <div class="window-row">
       <div class="window"></div>
       <div class="window"></div>
      </div>
      <div class="window-row">
       <div class="window"></div>
       <div class="window"></div>
      </div>
      <div class="window-row">
       <div class="window"></div>
       <div class="window"></div>
      </div>
     </div>
    </div>
   </div>
   <div class="building">
    <div class="text-3xl">
     üéÑ
    </div>
    <div class="building-body" style="width: 65px; height: 130px;">
     <div class="building-windows">
      <div class="window-row">
       <div class="window"></div>
       <div class="window"></div>
       <div class="window"></div>
      </div>
      <div class="window-row">
       <div class="window"></div>
       <div class="window"></div>
       <div class="window"></div>
      </div>
      <div class="window-row">
       <div class="window"></div>
       <div class="window"></div>
       <div class="window"></div>
      </div>
     </div>
    </div>
   </div>
   <div class="building">
    <div class="text-2xl">
     ‚≠ê
    </div>
    <div class="building-body" style="width: 50px; height: 95px;">
     <div class="building-windows">
      <div class="window-row">
       <div class="window"></div>
       <div class="window"></div>
      </div>
      <div class="window-row">
       <div class="window"></div>
       <div class="window"></div>
      </div>
      <div class="window-row">
       <div class="window"></div>
       <div class="window"></div>
      </div>
     </div>
    </div>
   </div>
  </div><!-- Forest Background -->
  <div class="forest">
   <div class="tree large">
    <div class="tree-top"></div>
    <div class="tree-middle"></div>
    <div class="tree-bottom"></div>
    <div class="tree-trunk"></div>
   </div>
   <div class="tree small">
    <div class="tree-top"></div>
    <div class="tree-middle"></div>
    <div class="tree-bottom"></div>
    <div class="tree-trunk"></div>
   </div>
   <div class="tree">
    <div class="tree-top"></div>
    <div class="tree-middle"></div>
    <div class="tree-bottom"></div>
    <div class="tree-trunk"></div>
   </div>
   <div class="tree small">
    <div class="tree-top"></div>
    <div class="tree-middle"></div>
    <div class="tree-bottom"></div>
    <div class="tree-trunk"></div>
   </div>
   <div class="tree large">
    <div class="tree-top"></div>
    <div class="tree-middle"></div>
    <div class="tree-bottom"></div>
    <div class="tree-trunk"></div>
   </div>
   <div class="tree">
    <div class="tree-top"></div>
    <div class="tree-middle"></div>
    <div class="tree-bottom"></div>
    <div class="tree-trunk"></div>
   </div>
   <div class="tree small">
    <div class="tree-top"></div>
    <div class="tree-middle"></div>
    <div class="tree-bottom"></div>
    <div class="tree-trunk"></div>
   </div>
   <div class="tree large">
    <div class="tree-top"></div>
    <div class="tree-middle"></div>
    <div class="tree-bottom"></div>
    <div class="tree-trunk"></div>
   </div>
   <div class="tree">
    <div class="tree-top"></div>
    <div class="tree-middle"></div>
    <div class="tree-bottom"></div>
    <div class="tree-trunk"></div>
   </div>
   <div class="tree small">
    <div class="tree-top"></div>
    <div class="tree-middle"></div>
    <div class="tree-bottom"></div>
    <div class="tree-trunk"></div>
   </div>
   <div class="tree">
    <div class="tree-top"></div>
    <div class="tree-middle"></div>
    <div class="tree-bottom"></div>
    <div class="tree-trunk"></div>
   </div>
   <div class="tree large">
    <div class="tree-top"></div>
    <div class="tree-middle"></div>
    <div class="tree-bottom"></div>
    <div class="tree-trunk"></div>
   </div>
   <div class="tree small">
    <div class="tree-top"></div>
    <div class="tree-middle"></div>
    <div class="tree-bottom"></div>
    <div class="tree-trunk"></div>
   </div>
   <div class="tree">
    <div class="tree-top"></div>
    <div class="tree-middle"></div>
    <div class="tree-bottom"></div>
    <div class="tree-trunk"></div>
   </div>
   <div class="tree small">
    <div class="tree-top"></div>
    <div class="tree-middle"></div>
    <div class="tree-bottom"></div>
    <div class="tree-trunk"></div>
   </div>
  </div><!-- Snowflakes Animation -->
  <div class="snowflake">
   ‚ùÑÔ∏è
  </div>
  <div class="snowflake">
   ‚ùÖ
  </div>
  <div class="snowflake">
   ‚ùÜ
  </div>
  <div class="snowflake">
   ‚ùÑÔ∏è
  </div>
  <div class="snowflake">
   ‚ùÖ
  </div>
  <div class="snowflake">
   ‚ùÜ
  </div>
  <div class="snowflake">
   ‚ùÑÔ∏è
  </div>
  <div class="snowflake">
   ‚ùÖ
  </div>
  <div class="snowflake">
   ‚ùÜ
  </div>
  <div class="snowflake">
   ‚ùÑÔ∏è
  </div>
  <div class="snowflake">
   ‚ùÖ
  </div>
  <div class="snowflake">
   ‚ùÜ
  </div>
  <div class="snowflake">
   ‚ùÑÔ∏è
  </div>
  <div class="snowflake">
   ‚ùÖ
  </div>
  <div class="snowflake">
   ‚ùÜ
  </div>
  <div class="snowflake">
   ‚ùÑÔ∏è
  </div>
  <div class="snowflake">
   ‚ùÖ
  </div>
  <div class="snowflake">
   ‚ùÜ
  </div>
  <div class="snowflake">
   ‚ùÑÔ∏è
  </div>
  <div class="snowflake">
   ‚ùÖ
  </div>
  <div class="min-h-full flex flex-col relative" style="z-index: 10;"><!-- Login Section -->
   <div id="login-section" class="min-h-full flex items-center justify-center px-6 py-12">
    <div class="max-w-md w-full"><!-- Header -->
     <div class="text-center mb-8">
      <div class="gift-animation inline-block text-8xl mb-4">
       üéÅ
      </div>
      <h1 id="portal-title" class="text-4xl font-bold text-gray-900 mb-2">Portal Participantes</h1>
      <h2 id="event-name" class="text-xl text-gray-600 mb-4">Intercambio Navide√±o 2025</h2><!-- Decorative elements -->
      <div class="flex justify-center items-center gap-2 mb-6"><span class="text-2xl animate-bounce">üéÑ</span> <span class="text-lg">„Éª</span> <span class="text-2xl animate-pulse">‚≠ê</span> <span class="text-lg">„Éª</span> <span class="text-2xl animate-bounce">üéÖ</span>
      </div>
     </div><!-- Login Card -->
     <div class="login-card rounded-2xl p-8 text-white shadow-2xl">
      <div class="text-center mb-6">
       <div class="text-5xl mb-4">
        üîê
       </div>
       <h3 class="text-2xl font-bold mb-2">Acceso de Participantes</h3>
       <p id="instructions-text" class="text-sm opacity-90">Aqu√≠ podr√°s ver tu asignaci√≥n de regalo secreto</p>
      </div>
      <form id="login-form" class="space-y-4">
       <div><label for="username" class="block text-sm font-medium mb-2 opacity-90">Usuario</label> <input type="text" id="username" name="username" required class="w-full px-4 py-3 rounded-lg bg-white bg-opacity-90 border border-white border-opacity-30 text-gray-800 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-white focus:ring-opacity-50 focus:bg-white" placeholder="Tu usuario">
       </div>
       <div><label for="password" class="block text-sm font-medium mb-2 opacity-90">Contrase√±a</label> <input type="password" id="password" name="password" required class="w-full px-4 py-3 rounded-lg bg-white bg-opacity-90 border border-white border-opacity-30 text-gray-800 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-white focus:ring-opacity-50 focus:bg-white" placeholder="Tu contrase√±a">
       </div><button type="submit" id="login-btn" class="w-full bg-white text-blue-600 font-bold py-3 px-6 rounded-lg transition-all duration-200 transform hover:scale-105 hover:shadow-lg"> <span class="flex items-center justify-center gap-2"> <span class="text-xl">üéÅ</span> <span>Ver mi Asignaci√≥n</span> </span> </button>
      </form><!-- Error Message -->
      <div id="error-message" class="mt-4 p-3 bg-red-500 bg-opacity-20 border border-red-300 border-opacity-30 rounded-lg text-center text-sm hidden"><span class="mr-2">‚ùå</span> <span>Usuario o contrase√±a incorrectos.</span>
      </div>
     </div><!-- Demo Credentials Info -->
     <div class="mt-8 bg-white rounded-lg p-6 shadow-md">
      <div class="text-center">
       <div class="text-3xl mb-3">
        üîë
       </div>
       <h4 class="font-bold text-gray-800 mb-2">Credenciales de Prueba</h4>
       <p class="text-xs text-gray-500 mb-3">Usa estas credenciales para probar el portal:</p>
       <div class="space-y-3">
        <div class="bg-blue-50 rounded-lg p-3">
         <p class="text-xs text-gray-600 mb-1">Participante 1:</p>
         <p class="text-sm text-gray-800"><strong>Usuario:</strong> maria123</p>
         <p class="text-sm text-gray-800"><strong>Contrase√±a:</strong> Pass123</p>
        </div>
        <div class="bg-purple-50 rounded-lg p-3">
         <p class="text-xs text-gray-600 mb-1">Participante 2:</p>
         <p class="text-sm text-gray-800"><strong>Usuario:</strong> juan456</p>
         <p class="text-sm text-gray-800"><strong>Contrase√±a:</strong> Pass456</p>
        </div>
        <div class="bg-pink-50 rounded-lg p-3">
         <p class="text-xs text-gray-600 mb-1">Participante 3:</p>
         <p class="text-sm text-gray-800"><strong>Usuario:</strong> ana789</p>
         <p class="text-sm text-gray-800"><strong>Contrase√±a:</strong> Pass789</p>
        </div>
       </div>
      </div>
     </div><!-- Portal Navigation -->
     <div class="mt-6 text-center"><a href="#" onclick="switchToAdminPortal()" class="inline-flex items-center gap-2 text-blue-600 hover:text-blue-800 transition-colors"> <span class="text-lg">üîß</span> <span class="text-sm font-medium">Ir al Portal Administrador</span> </a>
     </div>
    </div>
   </div><!-- Dashboard Section -->
   <div id="dashboard-section" class="hidden min-h-full flex flex-col"><!-- Header -->
    <header class="bg-gradient-to-r from-pink-600 to-red-600 text-white shadow-lg">
     <div class="max-w-4xl mx-auto px-6 py-6">
      <div class="flex items-center justify-between">
       <div class="flex items-center">
        <div class="text-4xl mr-4 gift-animation">
         üéÅ
        </div>
        <div>
         <h1 class="text-3xl font-bold">Mi Intercambio de Regalos</h1>
         <p id="welcome-message" class="text-lg opacity-90">¬°Bienvenido al Portal de Participantes!</p>
        </div>
       </div><button id="logout-btn" class="bg-gradient-to-r from-gray-700 to-gray-800 hover:from-gray-800 hover:to-gray-900 rounded-xl px-4 py-2 border-2 border-white shadow-lg transition-all duration-200 transform hover:scale-105"> <span class="flex items-center gap-2 text-sm text-white font-semibold"> <span>üö™</span> <span>Salir</span> </span> </button>
      </div><!-- Portal Navigation -->
      <div class="mt-4 pt-4 border-t border-white border-opacity-30">
       <div class="flex justify-center items-center gap-4">
        <div class="bg-gradient-to-r from-green-400 to-emerald-500 rounded-xl px-4 py-2 border-2 border-white shadow-lg">
         <div class="flex items-center gap-2 text-sm text-white font-semibold"><span class="text-lg">üë§</span> <span class="font-bold">Portal Participantes</span> <span class="text-xs bg-white text-green-700 px-2 py-0.5 rounded-full">Actual</span>
         </div>
        </div>
        <div class="text-white text-2xl">
         ‚ú®
        </div><a href="#" onclick="switchToAdminPortal()" class="bg-gradient-to-r from-amber-400 to-orange-500 hover:from-amber-500 hover:to-orange-600 rounded-xl px-4 py-2 border-2 border-white shadow-lg transition-all duration-200 transform hover:scale-105">
         <div class="flex items-center gap-2 text-sm text-white font-semibold"><span class="text-lg">üîß</span> <span class="font-bold">Portal Administrador</span>
         </div></a>
       </div>
      </div>
     </div>
    </header><!-- Main Content -->
    <main class="flex-1 max-w-4xl mx-auto px-6 py-8 w-full"><!-- User Info Card -->
     <div class="bg-white rounded-lg shadow-md p-6 mb-8">
      <div class="flex items-center"><span class="text-5xl mr-4">üë§</span>
       <div>
        <h2 class="text-2xl font-bold text-gray-800" id="user-name">Participante</h2>
        <p class="text-gray-600" id="user-email">usuario@email.com</p>
        <p class="text-gray-600" id="user-phone">üì± +51 999 999 999</p>
       </div>
      </div>
     </div><!-- Assignment Card -->
     <div id="assignment-pending" class="bg-gradient-to-r from-yellow-50 to-orange-50 rounded-lg p-8 mb-8 border-2 border-yellow-300 text-center">
      <div class="text-6xl mb-4">
       ‚è≥
      </div>
      <h3 class="text-2xl font-bold text-gray-800 mb-2">Sorteo Pendiente</h3>
      <p class="text-gray-600">El organizador a√∫n no ha realizado el sorteo.</p>
      <p class="text-sm text-gray-500 mt-2">Te notificaremos cuando estÔøΩÔøΩ listo.</p>
     </div>
     <div id="assignment-ready" class="hidden"><!-- Mystery Card (Before Reveal) -->
      <div id="mystery-card" class="reveal-card rounded-2xl p-8 text-white shadow-2xl mb-8 pulse-glow">
       <div class="text-center">
        <div class="text-7xl mb-6 gift-animation">
         üéÅ
        </div>
        <h3 class="text-3xl font-bold mb-4">¬°Tu Asignaci√≥n est√° Lista! üéâ</h3>
        <p class="text-lg opacity-90 mb-6">Descubre a qui√©n le regalar√°s en este intercambio</p><button id="reveal-btn" class="bg-white text-pink-600 font-bold py-4 px-8 rounded-lg transition-all duration-200 transform hover:scale-110 hover:shadow-xl text-lg"> <span class="flex items-center justify-center gap-2"> <span class="text-2xl">üëÄ</span> <span>¬°Revelar mi Asignaci√≥n!</span> </span> </button>
       </div>
      </div><!-- Revealed Card (After Reveal) -->
      <div id="revealed-card" class="hidden fade-in">
       <div class="bg-gradient-to-r from-green-400 to-blue-500 rounded-2xl p-8 text-white shadow-2xl mb-8">
        <div class="text-center">
         <div class="text-6xl mb-4">
          üéØ
         </div>
         <h3 class="text-3xl font-bold mb-2">¬°Tu Persona Asignada es!</h3>
         <div class="bg-white bg-opacity-20 rounded-xl p-6 my-6 backdrop-blur-sm">
          <div class="text-6xl mb-3">
           üéÅ
          </div>
          <p id="assigned-name" class="text-4xl font-bold mb-2">Nombre del Asignado</p>
          <p id="assigned-email" class="text-xl opacity-90">email@ejemplo.com</p>
         </div>
         <div class="confetti-animation text-4xl absolute top-0 left-1/4">
          üéâ
         </div>
         <div class="confetti-animation text-4xl absolute top-0 right-1/4" style="animation-delay: 0.3s;">
          üéä
         </div>
         <div class="confetti-animation text-4xl absolute top-0 left-1/2" style="animation-delay: 0.6s;">
          ‚ú®
         </div>
        </div>
       </div><!-- Instructions Card -->
       <div class="bg-white rounded-lg shadow-md p-6">
        <div class="flex items-center mb-4"><span class="text-3xl mr-3">üìù</span>
         <h4 class="text-xl font-bold text-gray-800">Instrucciones Importantes</h4>
        </div>
        <div class="space-y-3 text-gray-700">
         <div class="flex items-start"><span class="text-xl mr-3">ü§´</span>
          <p><strong>Mant√©n el secreto:</strong> No reveles a qui√©n le regalar√°s. ¬°Es parte de la sorpresa!</p>
         </div>
         <div class="flex items-start"><span class="text-xl mr-3">üíù</span>
          <p><strong>Elige un buen regalo:</strong> Considera los gustos e intereses de la persona asignada.</p>
         </div>
         <div class="flex items-start"><span class="text-xl mr-3">üìÖ</span>
          <p><strong>Fecha del evento:</strong> Aseg√∫rate de tener tu regalo listo para la fecha del intercambio.</p>
         </div>
         <div class="flex items-start"><span class="text-xl mr-3">‚ùì</span>
          <p><strong>¬øDudas?</strong> Contacta al organizador del evento si necesitas m√°s informaci√≥n.</p>
         </div>
        </div>
       </div>
      </div>
     </div>
    </main><!-- Footer -->
    <footer class="bg-gray-800 text-white py-6">
     <div class="max-w-4xl mx-auto px-6 text-center">
      <div class="flex justify-center items-center gap-2 mb-2"><span class="animate-bounce">üéÅ</span> <span class="animate-pulse">üéÑ</span> <span class="animate-bounce">‚≠ê</span> <span class="animate-pulse">üéÖ</span> <span class="animate-bounce">üéâ</span>
      </div>
      <p class="text-gray-300">Portal de Participantes - Intercambio de Regalos 2025</p>
      <p class="text-xs text-gray-400 mt-1">¬°Que disfrutes el intercambio!</p>
     </div>
    </footer>
   </div>
  </div>
  <script>
        // Configuration
        const defaultConfig = {
            portal_title: "Portal Participantes - Intercambio de Regalos",
            event_name: "Intercambio Navide√±o 2025",
            welcome_message: "¬°Bienvenido al Portal de Participantes!",
            instructions_text: "Aqu√≠ podr√°s ver tu asignaci√≥n de regalo secreto",
            background_color: "#fdf2f8",
            primary_color: "#ec4899",
            secondary_color: "#ef4444",
            text_color: "#374151",
            surface_color: "#ffffff"
        };

        let allRecords = [];
        let participants = [];
        let currentUser = null;
        let isLoggedIn = false;

        // Demo participants (fallback when no data in SDK)
        const demoParticipants = [
            {
                id: 'demo1',
                name: 'Mar√≠a Gonz√°lez',
                email: 'maria@email.com',
                phone: '+51 999 111 222',
                username: 'maria123',
                password: 'Pass123',
                assignedTo: 'Juan P√©rez',
                assignedToEmail: 'juan@email.com',
                recordType: 'participant'
            },
            {
                id: 'demo2',
                name: 'Juan P√©rez',
                email: 'juan@email.com',
                phone: '+51 999 333 444',
                username: 'juan456',
                password: 'Pass456',
                assignedTo: 'Ana Mart√≠nez',
                assignedToEmail: 'ana@email.com',
                recordType: 'participant'
            },
            {
                id: 'demo3',
                name: 'Ana Mart√≠nez',
                email: 'ana@email.com',
                phone: '+51 999 555 666',
                username: 'ana789',
                password: 'Pass789',
                assignedTo: 'Mar√≠a Gonz√°lez',
                assignedToEmail: 'maria@email.com',
                recordType: 'participant'
            }
        ];

        // Data SDK Handler
        const dataHandler = {
            onDataChanged(data) {
                allRecords = data || [];
                participants = allRecords.filter(r => r.recordType === 'participant');
                
                // Use demo participants if no data in SDK
                if (participants.length === 0) {
                    participants = demoParticipants;
                }
                
                if (isLoggedIn && currentUser) {
                    const updatedUser = participants.find(p => p.id === currentUser.id);
                    if (updatedUser) {
                        currentUser = updatedUser;
                        updateDashboard();
                    }
                }
            }
        };

        // Portal navigation
        function switchToAdminPortal() {
            window.open('ADMIN_PORTAL_URL', '_blank');
        }

        // Login form handler
        document.getElementById('login-form').addEventListener('submit', (e) => {
            e.preventDefault();
            
            const formData = new FormData(e.target);
            const username = formData.get('username').trim();
            const password = formData.get('password').trim();
            
            // Use demo participants if no data loaded yet
            const participantsToCheck = participants.length > 0 ? participants : demoParticipants;
            
            const user = participantsToCheck.find(p => 
                p.username === username && p.password === password
            );
            
            if (user) {
                currentUser = user;
                isLoggedIn = true;
                showDashboard();
                showToast("¬°Bienvenido! Has iniciado sesi√≥n exitosamente.", "success");
            } else {
                showLoginError();
                showToast("Usuario o contrase√±a incorrectos.", "error");
            }
        });

        // Logout handler
        document.getElementById('logout-btn').addEventListener('click', () => {
            currentUser = null;
            isLoggedIn = false;
            showLogin();
            showToast("Has cerrado sesi√≥n.", "info");
        });

        // Reveal button handler
        document.getElementById('reveal-btn').addEventListener('click', () => {
            const mysteryCard = document.getElementById('mystery-card');
            const revealedCard = document.getElementById('revealed-card');
            
            mysteryCard.classList.add('hidden');
            revealedCard.classList.remove('hidden');
            
            showToast("¬°Asignaci√≥n revelada! üéâ", "success");
        });

        // Show login
        function showLogin() {
            document.getElementById('login-section').classList.remove('hidden');
            document.getElementById('dashboard-section').classList.add('hidden');
            
            document.getElementById('login-form').reset();
            document.getElementById('error-message').classList.add('hidden');
        }

        // Show dashboard
        function showDashboard() {
            document.getElementById('login-section').classList.add('hidden');
            document.getElementById('dashboard-section').classList.remove('hidden');
            
            updateDashboard();
        }

        // Show login error
        function showLoginError() {
            const errorDiv = document.getElementById('error-message');
            const loginForm = document.getElementById('login-form');
            
            errorDiv.classList.remove('hidden');
            loginForm.classList.add('shake-animation');
            
            setTimeout(() => {
                loginForm.classList.remove('shake-animation');
            }, 500);
        }

        // Update dashboard
        function updateDashboard() {
            if (!currentUser) return;
            
            document.getElementById('user-name').textContent = currentUser.name;
            document.getElementById('user-email').textContent = currentUser.email || 'Sin email registrado';
            document.getElementById('user-phone').textContent = `üì± ${currentUser.phone}`;
            
            if (currentUser.assignedTo) {
                document.getElementById('assignment-pending').classList.add('hidden');
                document.getElementById('assignment-ready').classList.remove('hidden');
                
                document.getElementById('assigned-name').textContent = currentUser.assignedTo;
                document.getElementById('assigned-email').textContent = currentUser.assignedToEmail || 'Sin email disponible';
            } else {
                document.getElementById('assignment-pending').classList.remove('hidden');
                document.getElementById('assignment-ready').classList.add('hidden');
            }
        }

        // Show toast message
        function showToast(message, type) {
            const toast = document.createElement('div');
            toast.className = `fixed top-4 right-4 p-4 rounded-lg shadow-lg z-50 fade-in ${
                type === 'success' ? 'bg-green-100 text-green-800 border border-green-200' :
                type === 'error' ? 'bg-red-100 text-red-800 border border-red-200' :
                'bg-blue-100 text-blue-800 border border-blue-200'
            }`;
            toast.textContent = message;
            
            document.body.appendChild(toast);
            
            setTimeout(() => {
                toast.remove();
            }, 4000);
        }

        // Element SDK Configuration
        async function onConfigChange(config) {
            document.getElementById('portal-title').textContent = config.portal_title || defaultConfig.portal_title;
            document.getElementById('event-name').textContent = config.event_name || defaultConfig.event_name;
            document.getElementById('welcome-message').textContent = config.welcome_message || defaultConfig.welcome_message;
            document.getElementById('instructions-text').textContent = config.instructions_text || defaultConfig.instructions_text;
            
            const backgroundColor = config.background_color || defaultConfig.background_color;
            const primaryColor = config.primary_color || defaultConfig.primary_color;
            const secondaryColor = config.secondary_color || defaultConfig.secondary_color;
            const textColor = config.text_color || defaultConfig.text_color;
            const surfaceColor = config.surface_color || defaultConfig.surface_color;
            
            document.body.style.background = `linear-gradient(to bottom right, ${backgroundColor}, #f3e8ff)`;
            
            const header = document.querySelector('header');
            if (header) {
                header.style.background = `linear-gradient(to right, ${primaryColor}, ${secondaryColor})`;
            }
            
            const loginCard = document.querySelector('.login-card');
            if (loginCard) {
                loginCard.style.background = `linear-gradient(135deg, ${primaryColor} 0%, ${secondaryColor} 100%)`;
            }
            
            const revealCard = document.querySelector('.reveal-card');
            if (revealCard) {
                revealCard.style.background = `linear-gradient(135deg, ${primaryColor} 0%, ${secondaryColor} 100%)`;
            }
            
            const textElements = document.querySelectorAll('h1, h2, h3, h4, p, label');
            textElements.forEach(el => {
                if (!el.classList.contains('text-white') && !el.classList.contains('text-gray-300')) {
                    el.style.color = textColor;
                }
            });
            
            const surfaces = document.querySelectorAll('.bg-white');
            surfaces.forEach(surface => {
                surface.style.backgroundColor = surfaceColor;
            });
        }

        function mapToCapabilities(config) {
            return {
                recolorables: [
                    {
                        get: () => config.background_color || defaultConfig.background_color,
                        set: (value) => {
                            config.background_color = value;
                            if (window.elementSdk) {
                                window.elementSdk.setConfig({ background_color: value });
                            }
                        }
                    },
                    {
                        get: () => config.surface_color || defaultConfig.surface_color,
                        set: (value) => {
                            config.surface_color = value;
                            if (window.elementSdk) {
                                window.elementSdk.setConfig({ surface_color: value });
                            }
                        }
                    },
                    {
                        get: () => config.text_color || defaultConfig.text_color,
                        set: (value) => {
                            config.text_color = value;
                            if (window.elementSdk) {
                                window.elementSdk.setConfig({ text_color: value });
                            }
                        }
                    },
                    {
                        get: () => config.primary_color || defaultConfig.primary_color,
                        set: (value) => {
                            config.primary_color = value;
                            if (window.elementSdk) {
                                window.elementSdk.setConfig({ primary_color: value });
                            }
                        }
                    },
                    {
                        get: () => config.secondary_color || defaultConfig.secondary_color,
                        set: (value) => {
                            config.secondary_color = value;
                            if (window.elementSdk) {
                                window.elementSdk.setConfig({ secondary_color: value });
                            }
                        }
                    }
                ],
                borderables: [],
                fontEditable: undefined,
                fontSizeable: undefined
            };
        }

        function mapToEditPanelValues(config) {
            return new Map([
                ["portal_title", config.portal_title || defaultConfig.portal_title],
                ["event_name", config.event_name || defaultConfig.event_name],
                ["welcome_message", config.welcome_message || defaultConfig.welcome_message],
                ["instructions_text", config.instructions_text || defaultConfig.instructions_text]
            ]);
        }

        // Create sinusoidal garland with lights
        function createGarland() {
            const garlandStrand = document.getElementById('garland-strand');
            garlandStrand.innerHTML = '';
            const width = window.innerWidth;
            const numBranches = Math.floor(width / 25);
            const amplitude = 45;
            const frequency = 3;
            
            const colors = ['red', 'yellow', 'blue', 'green', 'pink', 'orange'];
            
            for (let i = 0; i < numBranches; i++) {
                const x = (i / numBranches) * width;
                const normalizedX = (i / numBranches) * Math.PI * 2 * frequency;
                const y = Math.sin(normalizedX) * amplitude + amplitude + 20;
                
                const branch = document.createElement('div');
                branch.className = 'garland-branch';
                branch.style.left = `${x}px`;
                branch.style.top = `${y}px`;
                branch.style.height = `${15 + Math.random() * 10}px`;
                branch.style.transform = `rotate(${Math.random() * 20 - 10}deg)`;
                
                garlandStrand.appendChild(branch);
                
                if (i % 2 === 0) {
                    const light = document.createElement('div');
                    const randomColor = colors[Math.floor(Math.random() * colors.length)];
                    light.className = `light ${randomColor}`;
                    light.style.left = `${x}px`;
                    light.style.top = `${y + 22}px`;
                    
                    garlandStrand.appendChild(light);
                }
            }
        }

        // Initialize SDKs
        async function initializeApp() {
            createGarland();
            
            if (window.elementSdk) {
                window.elementSdk.init({
                    defaultConfig,
                    onConfigChange,
                    mapToCapabilities,
                    mapToEditPanelValues
                });
            }
            
            if (window.dataSdk) {
                const result = await window.dataSdk.init(dataHandler);
                if (!result.isOk) {
                    console.error("Failed to initialize Data SDK");
                }
            }
        }
        
        window.addEventListener('resize', () => {
            const garlandStrand = document.getElementById('garland-strand');
            garlandStrand.innerHTML = '';
            createGarland();
        });

        initializeApp();
    </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9a24a407d3a09519',t:'MTc2Mzc3NDgwOC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
